<!DOCTYPE html>
<html>
  <head>
    <title>Autotools Trick:&nbsp;config.site | 
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="alternate" type="application/atom+xml" title="Disaster Area" href="http://github.paxswill.com/http://github.paxswill.com/feeds/all.atom.xml">
    <!-- Stylesheets -->
    <link rel="stylesheet" media="screen" href="http://github.paxswill.com/theme/css/bootstrap.css">
    <link rel="stylesheet" href="http://github.paxswill.com/theme/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="http://github.paxswill.com/theme/css/style.css">
    <link rel="stylesheet" href="http://github.paxswill.com/theme/css/pygments.css">
  </head>
  <body>
    <div class="container">
      <div class="row">
        <header class="col-sm-offset-2 col-sm-8 col-md-offset-1 col-md-2">
          <h1><a href="http://github.paxswill.com/">Disaster Area</a><br class="visible-md visible-lg">
            <small>
              <a href="mailto:paxswill@paxswill.com"><i class="icon-envelope"></i></a>
              <a href="https://github.com/paxswill"><i class="icon-github-sign"></i></a>
              <a href="http://stackoverflow.com/users/96454"><i class="icon-stackexchange"></i></a>
            </small>
          </h1>
        </header>
        <div class="clearfix hidden-md hidden-lg"></div>
        <div class="col-sm-2 hidden-md hidden-lg"></div>
        <div class="col-sm-8 col-md-6">
<article>
<h2>
  <a href="/blog/2012/02/07/autotool-trick-config-dot-site/">Autotools Trick:&nbsp;config.site</a>
<small><time datetime="2012-02-07 16:01" pubdate>
  07 February 2012
</time>
</small></h2>

<p>This is a quick trick for those who have to continually set up common settings
when using Autotools style <code>configure</code> scripts. One of the initial steps a
configure script does is to look for a <code>$prefix/share/config.site</code>
file and then to execute its contents. An example of how this may be useful is
if you have some common libraries that are not on the default search paths for
your compiler and you want <code>CFLAGS</code> and <code>LDFLAGS</code> set automatically. In my case
I commonly use the Nvidia OpenCL headers, which on the machines I use are
installed to <code>/usr/local/cuda/include</code>. To use them, I could have a config.log
file like so in my default installation&nbsp;prefix.</p>
<div class="highlight"><pre><span class="nv"><span class="caps">CPPFLAGS</span></span><span class="o">=</span><span class="s2">&quot;${<span class="caps">CPPFLAGS</span>} -I/usr/local/cuda/include&quot;</span>
</pre></div>


<p>Now when I run <code>configure</code>, it picks up that additional flag for the C&nbsp;preprocessor.</p>
<p>A more complicated example is if you maintain a seperate prefix. I do this in
my home folder for my <span class="caps">CS</span> department account. Because my home folder is shared
over <span class="caps">NFS</span> to all of the department&#8217;s machines, and many of them have different
architectures and operating environments, I keep a prefix for different classes
of machines. For&nbsp;example:</p>
<div class="highlight"><pre><span class="o">~/</span><span class="n">local</span><span class="o">/</span>
        <span class="n">fast</span><span class="o">-</span><span class="n">sparc</span><span class="o">/</span>
        <span class="n">fast</span><span class="o">-</span><span class="n">ubuntu</span><span class="o">/</span>
        <span class="n">nv</span><span class="o">-</span><span class="n">s1070</span><span class="o">/</span>
        <span class="n">nv</span><span class="o">-</span><span class="n">c870</span><span class="o">/</span>
        <span class="n">src</span><span class="o">/</span>
</pre></div>


<p>The <code>src</code> directory is just a repository for all of the source packages that I 
end up installing in the other directories. In my <code>.bashrc</code> I export a
variable, <code>LOCAL_PREFIX</code>, that is set to the prefix for the machine I&#8217;m logging
into. Then, all I need to do is <code>./configure --prefix=$LOCAL_PREFIX</code> and the
compiler flags are properly set for that prefix. Another possibility is to
export the <code>CONFIG_SITE</code> variable set to the path to the config.site file for
that machine&nbsp;configuration.</p>
<p>More details about config.site can be found in the <a href="http://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.68/html_node/Site-Defaults.html#Site-Defaults">Autoconf manual</a>.</p>
</article>

        </div>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-offset-3 col-md-3">
            <ul>
                <li><a href="/tutorials">Tutorials</a></li>
                <li><a href="/archives">Archives</a></li>
            </ul>
          </div>
          <div class="col-md-3">
            <p>&copy; Will Ross 2008&ndash;2012
</p>
          </div>
        </div>
      </div>
    </footer>
    <script src="//code.jquery.com/jquery.js"></script>
    <script src="theme/js/bootstrap.min.js"></script>
  </body>
</html>